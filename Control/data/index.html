<!DOCTYPE html>
<html>
<head>
    <meta name="viewport" content="width = device-width, initial-scale = 1.0, maximum-scale = 1.0, user-scalable=0">
    <title>ESP8266 Config Wifi</title>
    <link rel="stylesheet" href="/bootstrap.min.css">
    <script type="text/javascript" src="/bootstrap.min.js"></script>
    <script type="text/javascript" src="/jquery-1.7.1.min.js"></script>
    <script>
        function start() {
            $.ajax({
                url: "/setting",
                type: "GET",
            }).success(function (data) {
                var val = data.split("*");
                document.getElementById('wifi').value = val[0];
                document.getElementById('password').value = val[1];
                document.getElementById('host').value = val[2];
            })
        }

        function buttonclick(e) {
            var wifi = document.getElementById('wifi');
            var password = document.getElementById('password');
            var host = document.getElementById('host');
            var datapost = (wifi.value.length + password.value.length + host.value.length + 4).toString() + "*" + wifi.value + "*" + password.value + "*" + host.value;
            
            $.ajax({
                url: "/setting",
                type: "POST",
                data: datapost,
                contentType: "application/json"
            })
                .done(function (data) {
                })
        }
    </script>
</head>
<body onload="javascript:start();">
    <div class="container">
        <h2>Setting</h2>
        <form>
            <div class="form-group">
                <label for="wifi">Wifi SSID:</label>
                <input id="wifi" class="form-control" type="text" placeholder="Wifi" maxlength="40" required="required" />
            </div>
            <div class="form-group">
                <label for="password">Wifi Password:</label>
                <input id="password" class="form-control" type="text" placeholder="Password" maxlength="40" required="required" />
            </div>
            <div class="form-group">
                <label for="host">Server Host:</label>
                <input id="host" type="text" class="form-control" placeholder="Host" maxlength="100" required="required" />
            </div>
            <div class="form-group">
                <button onclick="buttonclick(this);" class="btn btn-primary">OK</button>
            </div>
        </form>
    </div>
</body>
</html>